<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <import type="android.view.View"/>
        <import type="fr.enlight.anima.animamagiccards.ui.spellbooks.utils.SpellGradeLevel" />

        <variable
            name="model"
            type="fr.enlight.anima.animamagiccards.ui.spellbooks.viewmodels.SpellViewModel" />
    </data>

    <android.support.constraint.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/transparent"
        app:stackHeaderHeight="150dp">

        <android.support.constraint.Guideline
            android:id="@+id/top_header_guideline"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            app:layout_constraintGuide_percent="0.05" />

        <android.support.constraint.Guideline
            android:id="@+id/bottom_header_guideline"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            app:layout_constraintGuide_percent="0.15" />

        <android.support.constraint.Guideline
            android:id="@+id/scroll_guideline"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            app:layout_constraintGuide_percent="0.23" />

        <android.support.constraint.Guideline
            android:id="@+id/center_guideline"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            app:layout_constraintGuide_percent="0.5" />

        <ImageView
            android:id="@+id/spell_card_background"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginLeft="@dimen/spacing_large"
            android:layout_marginRight="@dimen/spacing_large"
            android:src="@{model.getBackground(context)}"
            app:layout_constraintDimensionRatio="H,161:225"
            app:layout_constraintLeft_toLeftOf="parent"
            app:layout_constraintRight_toRightOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            tools:src="@drawable/card_background_book_free_access" />

        <TextView
            android:id="@+id/spell_title"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginEnd="@dimen/spacing_xbig"
            android:layout_marginLeft="@dimen/spacing_xbig"
            android:layout_marginRight="@dimen/spacing_xbig"
            android:layout_marginStart="@dimen/spacing_xbig"
            android:gravity="center"
            android:maxLines="1"
            android:text="@{model.spell.name}"
            android:textColor="@android:color/white"
            android:textSize="@dimen/textSize_spell_title"
            app:customFont="@{@string/spell_title_font}"
            app:layout_constraintBottom_toBottomOf="@id/bottom_header_guideline"
            app:layout_constraintLeft_toLeftOf="parent"
            app:layout_constraintRight_toRightOf="parent"
            app:layout_constraintTop_toTopOf="@id/top_header_guideline"
            tools:text="Sphère de destruction" />

        <TextView
            android:id="@+id/spell_action_type"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="@dimen/spell_effect_margin"
            android:layout_marginStart="@dimen/spell_effect_margin"
            android:text="@{model.getActionType(context)}"
            android:textColor="@android:color/black"
            android:textSize="@dimen/textSize_medium"
            app:customFont="@{@string/regular_font}"
            app:layout_constraintLeft_toLeftOf="@id/spell_card_background"
            app:layout_constraintTop_toTopOf="@id/scroll_guideline"
            tools:text="Action : Active" />

        <TextView
            android:id="@+id/spell_type"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@{model.getType(context)}"
            android:textColor="@android:color/black"
            android:textSize="@dimen/textSize_medium"
            app:customFont="@{@string/regular_font}"
            app:layout_constraintLeft_toLeftOf="@id/center_guideline"
            app:layout_constraintTop_toTopOf="@id/scroll_guideline"
            tools:text="Type : Attaque" />

        <include
            android:id="@+id/spell_advanced_grade"
            layout="@layout/view_spell_grade_item"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginBottom="@dimen/spacing_big"
            android:layout_marginLeft="@dimen/spell_grade_border_spacing"
            android:layout_marginStart="@dimen/spell_grade_border_spacing"
            app:layout_constraintBottom_toBottomOf="@id/spell_card_background"
            app:layout_constraintDimensionRatio="H, 169:92"
            app:layout_constraintLeft_toLeftOf="@id/spell_card_background"
            app:layout_constraintRight_toRightOf="@id/center_guideline"
            app:model="@{model.getSpellGradeModel(SpellGradeLevel.ADVANCED_LEVEL)}" />

        <include
            android:id="@+id/spell_arcane_grade"
            layout="@layout/view_spell_grade_item"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginBottom="@dimen/spacing_big"
            android:layout_marginEnd="@dimen/spell_grade_border_spacing"
            android:layout_marginRight="@dimen/spell_grade_border_spacing"
            app:layout_constraintBottom_toBottomOf="@id/spell_card_background"
            app:layout_constraintDimensionRatio="H, 169:92"
            app:layout_constraintLeft_toLeftOf="@id/center_guideline"
            app:layout_constraintRight_toRightOf="@id/spell_card_background"
            app:model="@{model.getSpellGradeModel(SpellGradeLevel.ARCANE_LEVEL)}" />

        <include
            android:id="@+id/spell_initial_grade"
            layout="@layout/view_spell_grade_item"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginLeft="@dimen/spell_grade_border_spacing"
            android:layout_marginStart="@dimen/spell_grade_border_spacing"
            app:layout_constraintBottom_toTopOf="@id/spell_advanced_grade"
            app:layout_constraintDimensionRatio="H, 169:92"
            app:layout_constraintLeft_toLeftOf="@id/spell_card_background"
            app:layout_constraintRight_toRightOf="@id/center_guideline"
            app:model="@{model.getSpellGradeModel(SpellGradeLevel.INITIAL_LEVEL)}" />

        <include
            android:id="@+id/spell_intermediate_grade"
            layout="@layout/view_spell_grade_item"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginEnd="@dimen/spell_grade_border_spacing"
            android:layout_marginRight="@dimen/spell_grade_border_spacing"
            app:layout_constraintBottom_toTopOf="@id/spell_advanced_grade"
            app:layout_constraintDimensionRatio="H, 169:92"
            app:layout_constraintLeft_toLeftOf="@id/center_guideline"
            app:layout_constraintRight_toRightOf="@id/spell_card_background"
            app:model="@{model.getSpellGradeModel(SpellGradeLevel.INTERMEDIATE_LEVEL)}" />

        <Button
            android:id="@+id/spell_see_more_button"
            style="@style/FlatButton.NoPadding"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            app:layout_constraintBottom_toTopOf="@id/spell_initial_grade"
            app:layout_constraintRight_toRightOf="@id/spell_card_background"
            app:layout_constraintLeft_toLeftOf="@id/spell_card_background"
            app:customFont="@{@string/regular_bold_font}"
            android:paddingBottom="@dimen/spacing_small"
            android:onClick="@{() -> model.expandEffect()}"
            android:visibility="@{model.effectEllipsized ? View.VISIBLE : View.INVISIBLE}"
            android:text="@string/Common_See_More"/>

        <TextView
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_marginEnd="@dimen/spell_effect_margin"
            android:layout_marginLeft="@dimen/spell_effect_margin"
            android:layout_marginRight="@dimen/spell_effect_margin"
            android:layout_marginStart="@dimen/spell_effect_margin"
            android:ellipsize="end"
            android:maxLines="8"
            android:onClick="@{() -> model.expandEffect()}"
            android:text="@{model.getEffect(context)}"
            android:textColor="@android:color/black"
            android:textSize="@dimen/textSize_medium"
            app:customFont="@{@string/regular_font}"
            app:layout_constraintBottom_toTopOf="@id/spell_see_more_button"
            app:layout_constraintLeft_toLeftOf="@id/spell_card_background"
            app:layout_constraintRight_toRightOf="@id/spell_card_background"
            app:layout_constraintTop_toBottomOf="@id/spell_action_type"
            tools:text="Effet : Projette plusieurs décharges d'énergies magiques. L'attaque se fait sur le Mode Energie et les dégâts sont de 30 points.\n\nChaque sphère peut attaquer des cibles différentes mais dans ce cas, chacune doit être désignée au lancement du sort, avant de lancer les dés.\n\nProjette plusieurs décharges d'énergies magiques. L'attaque se fait sur le Mode Energie et les dégâts sont de 30 points.\n\nChaque sphère peut attaquer des cibles différentes mais dans ce cas, chacune doit être désignée au lancement du sort, avant de lancer les dés." />

    </android.support.constraint.ConstraintLayout>
</layout>